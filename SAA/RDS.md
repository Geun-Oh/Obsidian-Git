>[!info] Relational Database Service


>[!summary] RDS Summary
>
>- 관리형 MySQL / PostgreSQL / Oracle / SQL Server / MariaDB / Custom DB에 대해 지원
>- 사용 시 


- 관리형 데이터베이스 서비스, SQL을 쿼리 언어로 사용한다.

- AWS에 의해 관리되는 클라우드 데이터베이스를 만들 수 있다. => 혜택이 많다.

- 종류
	- PostgresQL
	- MySQL
	- MariaDB
	- Oracle
	- MS SQL Server
	- [[Aurora]]
	꼭 기억하기!

- 프로비져닝, 운영체제 패치 자동화
- 지속적인 백업 생성 => 타임스탬프를 활용해 특정 시점으로 돌아갈 수 있다.
- 대시보드 모니터링
- 향상된 읽기 능력을 활용한 복제본 읽기
- DR(Disaster Recovery)를 위한 다중 AZ 설정
- 유지 관리 기간 내 업그레이드 가능
- 수직 확장, 수평 확장 가능
- 파일 스토리지는 EBS에 구성(gp2 or io1)

- 하지만, EC2 인스턴스에 SSH 접속은 불가하다.

## RDS - Storage Auto Scaling

- 동적으로 RDS DB 인스턴스의 스토리지 용량을 올릴 수 있도록 해줌
- RDS 자체적으로 오토 스케일링 동작
- 최대 임곗값 설정하기

- 스토리지 자동 확장되는 경우
	- 여유공간이 전체의 10% 이하가 되었을 때
	- 스토리지 부족 상태가 5분 이상 지속될 때
	- 마지막 수정으로부터 6시간이 지났을 때
	- 

=> 워크로드 예측이 불가할 때 매우 유용하다

## RDS 읽기 전용 복제본과 다중 AZ

- RDS에서는 기본적으로 쓰기 전용 master와 읽기 전용 인스턴스를 둔다.
- production apllication에서는 master와 직접 IO를 진행하고, 이외에 클라이언트에서는 읽기 전용 복제본을 사용한다.

- 이때 다중 AZ 옵션을 적용해 복제본들을 다른 곳에 둠으로써 가용성을 높히고 재해복구에 용이한 아키텍쳐를 만들 수 있다.
- 이때에는 비동기 방식으로, 해당 읽기 전용 인스턴스에 요청이 들어오면 그때그때 master에서 스냅샷을 가져오는 느낌?

- 동기 방식으로 진행하는 경우, 중간에 읽기 전용 인스턴스를 승격시켜 아예 다른 DB로 활용할 수도 있고, master가 다운되었을 때 빠르게 새로운 master를 지정해줄 수 있다.


## RDS 백업

- 자동 백업
	- RDS 는 데이터베이스 backup window(백업 기간?) 동안 매일 전체 백업을 수행한다.
	- 5분마다 트랜잭션 로그가 백업된다. => 가장 빠른 백업은 최소 5분 전!
	- 언제든 5분 전으로 복원 간으하다.
	- 자동 백업 보존은 1~35일 사이로 설정해둘 수 있고, 이를 사용하지 않으려면 0으로 설정해두면 된다.

- 수동 데이터베이스 스냅샷
	- 사용자가 수동 트리거
	- 원하는 기간동안 백업 유지 가능

> [!example] 수동 스냅샷 백업을 이용한 비용 절감 팁
> 한 달에 2시간 정도만 사용하는 데이터베이스라고 가정, 사용하지 않는 기간에는 스냅샷으로 데이터를 보존해두고, 사용할 때 RDS에 스냅샷 복원을 한 뒤 사용하고 나서 다시 스냅샷을 생성하고 RDS를 삭제하는 방식으로 비용을 절감한다!

