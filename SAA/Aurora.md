>[!info] 너무 딥하게 알 필요 없이, 어떠한 방식으로 작동하는지와 특징을 이해하면 된다.

>[!summary] Aurora Summary
>
>- PostgreSQL / MySQL 가 호환되고, 컴퓨팅 자원과 스토리지 자원이 분리된느 특별한 서비스
>- 스토리지 자원: 3개의 AZ에 걸쳐 6개의 복사본에 저장된다 - 높은 가용성, 자가 복구, 오토 스케일링이 가능
>- <font color="#f79646">높은 가용성을 지닌다!</font>
>- 컴퓨팅 자원: 멀티 AZ에 걸친 데이터베이스 클러스터, 읽기 전용 복제본에 대한 오토 스케일링 제공 => 쓰기 및 읽기 커스텀 엔드포인트 제공을 통해, 트래픽을 확인하고 오토 스케일링
>- RDS와 동일한 보안 모니터링, 유지 관리 기능을 가진다.
>- 백업, 복구 옵션 제공
>- Aurora Serverless - 예측 불가한 워크로드에서 생성, 용량 계획 불필요
>- Aurora Multi-Master - 지속 가능한 쓰기 복구를 위함. 여러 인스턴스가 쓰기를 할 수 있도록 함.
>- Aurora Global - 각 리전 당 최대 16개의 읽기 복제본 생성이 가능, <font color="#f79646">1초 미만의 복제 시간</font>
>- Aurora Machine Learning - SageMaker & Comprehend를 사용해 Aurora 를 활용한 머신러닝이 가능
>- Aurora Database Cloning - 기존 클러스터로부터 새로운 클러스터 생성, 

- AWS 고유 기술, 오픈소스가 아님
- PostgreSQL, MySQL을 지원
- RDS의 MySQL보다 5배 높은 성능을 발휘하고, RDS의 PostgreSQL보다 3배 높은 성능을 보여준다.

- 10GB에서 시작할 수 있고, 자동으로 최대 128TB까지 커진다.
- MySQL에서 5개의 복제본을 둘 수 있던 것과 다르게, 15개의 복제본을 생성할 수 있다. 복제 속도도 더 빠르다.
- 장애 조치에 있어 즉각적이어서, 다른 서비스보다 빠르게 장애 회복이 가능하다.

## Aurora 높은 가용성 및 읽기 스케일링


- 모든 기록에 대해 3개의 가용영역에 6개의 복제본을 만든다.
- 이 중 쓰기에는 4개의 복제본이 필요하다
- 읽기에는 3개의 복제본이 필요하다.

- 일부 데이터의 손상이나 문제가 발생하면, 백엔드에서 p2p 방식의 자가 복구를 시행한다.
- 내부적으로 100개가 넘는 볼륨을 활용해 스토리지를 관리한다. => striped 형식으로 되어 있어 매우 잘 작동한다.

- 다중 AZ에 있더라도, 하나의 master 인스턴스가 쓰기를 담당한다.
- master가 다운되면, 30초 내로 장애 조치가 시작된다.
- 다중 리전 복제 또한 지원한다
- 72시간 내의 특정 시점으로 돌아가는 backtrack 기능도 제공한다.


## Aurora 클러스터

- 클러스터를 아우르는 하나의 shared storage volume이 존재하고, 내부적으로 master 인스턴스와 연결되는 writer endpoint가 존재한다.
- master의 복제본의 경우, 모두가 읽기 전용 인스턴스에 해당되며, 해당 인스턴스들은 하나의 reader endpoint를 통해 클라이언트와 통신한다. => reader endpoint에서 트래픽을 분산해주는 로드밸런서의 역할을 수행함
- 해당 읽기 복제본들의 평균 사용량을 판단하여 오토 스케일링을 진행하기도 한다.

## Aurora 고급개념


- 위의 상황처럼 reader endpoint내부 읽기 인스턴스가 여럿 존재하는데, 이 중 두 개의 인스턴스가 조금 더 좋은 성능의 인스턴스일 때가 있다.
- 이는 Aurora 인스턴스의 하위 집합을 사용자 지정 엔드포인트로 정의하고자 하기 위함인데, 이렇게 하는 이유는 해당되는 두 인스턴스의 성능이 더 뛰어나므로 이 특정 복제본들에 대해서만 분석 쿼리를 실행하는 것이 더 좋을 것  같기 때문!(일반 인스턴스는 이 작업에 참여하지 않도록 하기 위해서)
- 이렇게 사용자 지정 엔드포인트가 생성된 경우, 리더 엔드포인트는 존재하지만 사용되지 않는다.

## Aurora Serverless

- 실제 사용량에 따라 자동화된 DB인스턴스화 및 오토 스케일링 제공
- 워크로드가 드물거나 간헐적이거나 예측 불가한 경우에 사용
- 프로비저닝이 불필요하고, 사용되는 Aurora 인스턴스의 초당 비용을 지불하게 되므로 비용 효율적이다.


## Aurora Multi-master

- 쓰기에 대한 가용성을 높이고자 할 때!
- 모든 인스턴스가 쓰기를 허용한다.

## Global Aurora

- 다중 리전에 걸친 읽기 전용 복제본
	- 재해 복구에 용이
	- 사용하기 쉬움
- Aurora global database(권장됨)
	- 하나의 기본 리전에서 읽기와 쓰기 모두가 일어남
	- 최대 5개의 보조 읽기 전용 리전이 존재. => 복제 지연이 1초 미만!
	- 해당 보조 리전 하나 당 최대 16개의 읽기 복제본 생성이 가능하다. 전 세계의 읽기 시간을 단축 가능하다.
	- 특정 리전이 다운되었을 때, 재해 복구를 위해 다른 리전을 활성화하면 복구 시간 목표를 1분 미만으로 설정 가능!

## Aurora machine learning

- Aurora 리소스를 sagemaker, comprehend 서비스와 연동하여 ML 작업을 진행할 수 있음
- 이 경우 사용자는 aurora에 질의만 하면 자동으로 ML 모델이 작동해 결과를 aurora에 전달하고, aurora가 그 결과를 받아서 사용자에게 보내줌

## Aurora 백업


- 자동 백업
	- RDS와 유사하다.
	- 1~35일 내 백업 보존 기간 설정이 가능 => <font color="#f79646">그러나 RDS와 다르게 비활성화 불가</font>
	- 시점 복구 기능 => 해당 기간의 어느 시점으로든 복구 가능

- 수동 백업
	- 수동 트리거 가능, 원하느 기간 동안 유지 가능


## Aurora Database Cloning

- 단순히 존재하는 Aurora DB 클러스터에서 새로운 Aurora DB 를 클론
  
- 스냅샷을 찍어 복원하는 것보다 빠르게 동작
	- `copy-on-write` 프로토콜을 사용하기 때문
	- 